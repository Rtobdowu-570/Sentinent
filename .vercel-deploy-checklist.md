# Vercel Deployment Checklist

Use this checklist to ensure a smooth deployment to Vercel.

## Pre-Deployment

- [ ] Code is pushed to GitHub repository
- [ ] All tests pass locally (`npm run test:ci`)
- [ ] Build succeeds locally (`npm run build`)
- [ ] `.env` file is NOT committed (should be in `.gitignore`)
- [ ] `.env.example` is up to date with all required variables

## External Services Setup

- [ ] **Clerk**: Account created and application configured
  - [ ] Sign-in methods enabled (Email, Google, GitHub)
  - [ ] API keys copied
  - [ ] Redirect URLs configured

- [ ] **Database**: Vercel Postgres or other PostgreSQL provider
  - [ ] Database created
  - [ ] Connection string obtained

- [ ] **Google Gemini**: API key obtained
  - [ ] API enabled in Google Cloud Console
  - [ ] Billing enabled (if required)

- [ ] **Tavily or Perplexity**: API key obtained
  - [ ] Account created
  - [ ] API key generated

- [ ] **Jina AI**: API key obtained
  - [ ] Account created
  - [ ] API key generated

- [ ] **Upstash Redis** (optional): Redis database created
  - [ ] REST URL and token obtained

## Vercel Setup

- [ ] Vercel account created
- [ ] Project imported from GitHub
- [ ] Framework preset set to "Next.js"
- [ ] Build command: `npm run build` or `pnpm build`

## Environment Variables

Add these in Vercel Dashboard → Settings → Environment Variables:

### Required
- [ ] `DATABASE_URL`
- [ ] `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`
- [ ] `CLERK_SECRET_KEY`
- [ ] `NEXT_PUBLIC_CLERK_SIGN_IN_URL` = `/sign-in`
- [ ] `NEXT_PUBLIC_CLERK_SIGN_UP_URL` = `/sign-up`
- [ ] `NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL` = `/dashboard`
- [ ] `NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL` = `/dashboard`
- [ ] `GEMINI_API_KEY`
- [ ] `TAVILY_API_KEY` or `PERPLEXITY_API_KEY`
- [ ] `JINA_API_KEY`

### Optional
- [ ] `UPSTASH_REDIS_REST_URL`
- [ ] `UPSTASH_REDIS_REST_TOKEN`
- [ ] `NEXT_PUBLIC_APP_URL` (set after first deployment)

## First Deployment

- [ ] Click "Deploy" in Vercel
- [ ] Wait for build to complete
- [ ] Check deployment logs for errors
- [ ] Note your deployment URL (e.g., `https://your-app.vercel.app`)

## Post-Deployment Setup

- [ ] Set up database schema:
  ```bash
  vercel env pull .env.local
  npx prisma generate
  npx prisma db push
  ```

- [ ] Update `NEXT_PUBLIC_APP_URL` in Vercel environment variables
  - Value: Your Vercel deployment URL

- [ ] Update Clerk redirect URLs:
  - Sign-in URL: `https://your-app.vercel.app/sign-in`
  - Sign-up URL: `https://your-app.vercel.app/sign-up`
  - After sign-in: `https://your-app.vercel.app/dashboard`
  - After sign-up: `https://your-app.vercel.app/dashboard`

## Testing

- [ ] Visit your deployed application
- [ ] Test sign-up flow
- [ ] Test sign-in flow
- [ ] Create a test research
- [ ] Check dashboard statistics
- [ ] View research history
- [ ] Test favorites and tags
- [ ] Test dark mode toggle
- [ ] Test on mobile device

## Production Readiness

- [ ] Custom domain configured (optional)
- [ ] DNS records updated (if using custom domain)
- [ ] SSL certificate active (automatic with Vercel)
- [ ] Analytics enabled in Vercel
- [ ] Error tracking configured (Sentry, LogRocket, etc.)
- [ ] Monitoring set up
- [ ] Rate limiting tested
- [ ] API keys rotated from test to production keys

## Ongoing Maintenance

- [ ] Set up alerts for errors
- [ ] Monitor API usage and costs
- [ ] Review Vercel analytics regularly
- [ ] Keep dependencies updated
- [ ] Monitor database size and performance
- [ ] Review and rotate API keys periodically

## Troubleshooting

If deployment fails, check:
- [ ] Build logs in Vercel dashboard
- [ ] All environment variables are set correctly
- [ ] Database connection is working
- [ ] API keys are valid
- [ ] No syntax errors in code
- [ ] All dependencies are in `package.json`

## Resources

- [Vercel Documentation](https://vercel.com/docs)
- [Next.js Deployment](https://nextjs.org/docs/deployment)
- [Prisma with Vercel](https://www.prisma.io/docs/guides/deployment/deployment-guides/deploying-to-vercel)
- [Clerk with Vercel](https://clerk.com/docs/deployments/deploy-to-vercel)

---

**Need help?** See [DEPLOYMENT.md](./DEPLOYMENT.md) for detailed instructions.
